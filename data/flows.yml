flows:
  emotion_main_flow:
    description: Conversational support for any emotion/situation, with high-fidelity slot extraction and explicit listening turns
    steps:
      - collect: user_emotion
        description: LLM, extract main feeling (sad/angry/hurt/afraid/confused/embarrassed/lonely/left out/ignored/other emotion); don't interpret, just extract
        rejections:
          - condition: not slots.user_emotion
            response: utter_clarify_emotion
      - collect: situation_detail
        description: LLM, summarize the key event or trigger described (e.g. sibling did something, friend didnâ€™t text, physical aggression, words, accident, etc.); extract as much detail as user shared
        rejections:
          - condition: not slots.situation_detail
            response: utter_clarify_situation
      - action: utter_acknowledge_situation
      - collect: wants_solution
        description: LLM, did user ask for help or just want to vent? Extract Yes/No/Unclear
        rejections:
          - condition: slots.wants_solution == "Unclear"
            response: utter_clarify_help
      - action: utter_suggest_coping_if_wanted
      - collect: effect_of_solution
        description: LLM, how did user respond? Did it help? Did user say still sad, mad, or it didn't work?
        rejections:
          - condition: not slots.effect_of_solution
            response: utter_clarify_effect
      - action: utter_next_steps_or_empathy
