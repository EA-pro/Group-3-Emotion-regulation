flows:
  emotion_main_flow:
    description: Conversational support for ANY emotion/situation, child audience, broad LLM slot extraction, clarification if uncertain, always one collect per turn.
    steps:
      - collect: user_emotion
        description: LLM, extract main feeling (sad, mad, afraid, hurt, jealous, embarrassed, lonely, ignored, left out, bored, worried, disappointed, scared, upset, angry, happy, or any emotion); do not interpret, just extract
        rejections:
          - if: not slots.user_emotion
            utter: utter_clarify_emotion
      - collect: situation_detail
        description: LLM, summarize what happened in as much detail as user provides (e.g. another person, specific event, any trigger); allow for diverse, open-ended answers
        rejections:
          - if: not slots.situation_detail
            utter: utter_clarify_situation
      - action: utter_acknowledge_situation
      - collect: wants_solution
        description: LLM, does user want advice/solution/help or just to vent? Yes/No/Don't Know allowed. Be child-friendly, tolerant of complex answers.
        rejections:
          - if: not slots.wants_solution
            utter: utter_clarify_help
      - action: utter_suggest_coping_if_wanted
      - collect: effect_of_solution
        description: LLM, after suggestion/check-in, did user feel better, worse, or unchanged? Support all honest answers, don't assume positive result
        rejections:
          - if: not slots.effect_of_solution
            utter: utter_clarify_effect
      - action: utter_next_steps_or_empathy
