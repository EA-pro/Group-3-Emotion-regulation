flows:
  mad_path:
    description: Child says "really mad" and chatbot guides counting and reflection
    steps:
      - action: utter_greet_mad
      - collect: mad_reason
        description: Ask what happened
      - action: utter_acknowledge_mad_reason
      - collect: wants_counting
        description: Ask if child wants to count
        next:
          - if: slots.wants_counting in ["yes", "ok", "I guess", "fine"]
            then:
              - action: utter_do_counting
              - collect: counting_feeling
                description: How do you feel now?
              - action: utter_reflect_mad_progress
              - collect: final_mad_level
                description: Are you still really mad?
              - action: utter_praise_mad_progress
          - else:
              - action: utter_encourage_alternative

  annoyed_path:
    description: Child says "a bit annoyed" and chatbot offers reframing and solution
    steps:
      - action: utter_greet_annoyed
      - collect: annoyed_reason
        description: Ask what's bugging them
      - action: utter_acknowledge_annoyed_reason
      - collect: wants_solution
        description: Want to try a solution or message friend?
        next:
          - if: slots.wants_solution in ["yes", "maybe", "ok"]
            then:
              - action: utter_suggest_simple_solution
              - action: utter_acknowledge_success
              - collect: final_annoyance_level
                description: Still annoyed?
              - action: utter_praise_annoyed_progress
          - else:
              - action: utter_encourage_alternative

  guardian_report_path:
    description: Guardian asks for child's anger update and advice
    steps:
      - action: utter_greet_guardian
      - action: utter_report_child_anger
      - collect: guardian_wants_advice
        description: Anything else guardian wants to know?
      - action: utter_give_guardian_advice
      - action: utter_report_progress
      - action: utter_guardian_final_tips
