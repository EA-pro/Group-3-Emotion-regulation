version: "3.15.7"


rules:
- rule: Restart conversation anytime
  steps:
  - intent: restart_conversation
  - action: action_restart_conversation

- rule: Play a riddle on request
  steps:
  - intent: play_riddle
  - action: action_fetch_riddle

- rule: Summarize conversation on request
  steps:
  - intent: summarize
  - action: action_generate_rapport

- rule: Reframe affirm wraps up
  condition:
    - slot_was_set:
        - reframe_stage: wrap
  steps:
    - intent: affirm
    - action: action_handle_reframe_flow

- rule: Reframe deny tries another angle
  condition:
    - slot_was_set:
        - reframe_stage: wrap
  steps:
    - intent: deny
    - action: action_handle_reframe_flow


- rule: answer knowledge question
  steps:
  - intent: ask_question
  - action: action_trigger_search

- rule: finish riddle form
  condition:
  - active_loop: riddle_form
  steps:
  - action: riddle_form
  - active_loop: null
  - action: action_reset_riddle

- rule: prompt after support completion
  condition:
  - slot_was_set:
    - support_completed: true
  steps:
  - action: utter_support_done_check_mood
  - action: action_listen

- rule: support completion feeling better
  condition:
  - slot_was_set:
    - support_completed: true
  steps:
  - intent: mood_happy
  - action: utter_followup_mood_happy
  - action: action_clear_support_state
  - action: action_listen

- rule: support completion not feeling better
  condition:
  - slot_was_set:
    - support_completed: true
  steps:
  - intent: not_feeling_better
  - action: utter_followup_not_better
  - action: action_clear_support_state
  - action: action_listen
